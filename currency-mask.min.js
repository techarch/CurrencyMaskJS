function _MaskAPI(){this.version="0.6";this.instances=0;this.objects={}}MaskAPI=new _MaskAPI;function Mask(a,c){this.mask=a;this.type="string"==typeof c?c:"string";this.error=[];this.errorCodes=[];this.strippedValue=this.value="";this.allowPartial=!1;this.id=MaskAPI.instances++;this.ref="MaskAPI.objects['"+this.id+"']";MaskAPI.objects[this.id]=this}
Mask.prototype.attach=function(a){var c=navigator.userAgent;this.msie=c.match(/MSIE/g);this.msie9AndAbove=!1;if(this.msie){var b=1;null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(c)&&(b=parseFloat(RegExp.$1));this.msie9AndAbove=9<=b}this.webkit=c.match(/WebKit/g);$addEvent(a,"onkeydown","return "+this.ref+".isAllowKeyPress(event, this);",!0);$addEvent(a,"onkeyup","return "+this.ref+".getKeyPress(event, this);",!0);this.target=a;this.msie9AndAbove||this.webkit?$(a).blur(function(){$(this).change();return!0}):
$addEvent(a,"onblur","this.value = "+this.ref+".format(this.value);"+this.ref+".target.value=this.value;return this.value;",!0)};Mask.prototype.isAllowKeyPress=function(a,c){if("string"!=this.type)return!0;var b=new qEvent(a);return 47<b.keyCode&&c.value.length>=this.mask.length&&!b.ctrlKey?!1:!0};
Mask.prototype.getKeyPress=function(a,c,b){this.allowPartial=!0;var e=new qEvent(a);a=this.getCaretPosition(c);var g=c.value.length;if(47<e.keyCode||!0==b||8==e.keyCode||46==e.keyCode)b=c.value,e=8==e.keyCode||46==e.keyCode?!0:!1,this.value="number"==this.type?this.setNumber(b,e):"date"==this.type?this.setDateKeyPress(b,e):this.setGeneric(b,e),c.value=this.value,this.setCaretPosition(c,c.value.length>g?a+1:a);this.allowPartial=!1;return!0};
Mask.prototype.getCaretPosition=function(a){var c=0;if(this.msie){var b=document.selection.createRange(),c=document.selection.createRange().text.length;b.moveStart("character",-a.value.length);c=b.text.length-c;caretEnd=c+b.text.length}else if(a.selectionStart||"0"==a.selectionStart)c=a.selectionStart;return c};
Mask.prototype.setCaretPosition=function(a,c){if(this.msie){var b=document.selection.createRange();b.moveStart("character",-a.value.length);b.collapse(!0);b.moveEnd("character",c);b.moveStart("character",c);b.select()}else if(a.selectionStart||"0"==a.selectionStart)a.selectionStart=c,a.selectionEnd=c};Mask.prototype.format=function(a){return this.value="number"==this.type?this.setNumber(a):"date"==this.type?this.setDate(a):this.setGeneric(a)};
Mask.prototype.throwError=function(a,c,b){this.error[this.error.length]=c;this.errorCodes[this.errorCodes.length]=a;return"string"==typeof b?b:!0};
Mask.prototype.setGeneric=function(a,c){var b,e=this.mask,g=[],f="",h,m,k=[],l=0,p={x:"A-Za-z","#":"0-9","*":"A-Za-z0-9"};b=a.replace(RegExp("[^"+p["*"]+"]","gi"),"");!0==c&&b.length==this.strippedValue.length&&(b=b.substring(0,b.length-1));this.strippedValue=b;for(var n=0;n<e.length;n++){m=e.charAt(n);h=-1<"x#*".indexOf(m);"!"==m&&(m=e.charAt(n++));if(h&&!this.allowPartial||h&&this.allowPartial&&g.length<b.length)g[g.length]="["+p[m]+"]";k[k.length]={chr:m,mask:h}}e=!1;if(!this.allowPartial&&!RegExp(g.join("")).test(b))return this.throwError(1,
'The value "'+a+'" must be in the format '+this.mask+".",a);if(this.allowPartial&&0<b.length||!this.allowPartial)for(n=0;n<k.length;n++){if(k[n].mask){for(;0<b.length&&!RegExp(g[l]).test(b.charAt(l));)b=1==b.length?"":b.substring(1);0<b.length&&(f+=b.charAt(l),e=!0);l++}else f+=k[n].chr;if(this.allowPartial&&l>b.length)break}this.allowPartial&&!e&&(f="");this.allowPartial&&(this.nextValidChar=f.length<k.length?p[k[f.length].chr]:null);return f};
Mask.prototype.setNumber=function(a,c){var b=String(a).replace(/[^\d.-]*/gi,""),e=this.mask;if(("+"==b||"-"==b)&&-1==e.indexOf(b))return"";if(0<this.value.length&&(-1!=b.indexOf("+")||-1!=b.indexOf("-")))b=b.replace(/\+/g,""),b=b.replace(/\-/g,"");b=b.replace(/\+/,"d").replace(/\+/g,"").replace(/d/,"+");b=b.replace(/\-/,"d").replace(/\-/g,"").replace(/d/,"-");b=b.replace(/\./,"d").replace(/\./g,"").replace(/d/,".");if(!/^[\$]?((\$?[\+-]?([0#]{1,3},)?[0#]*(\.[0#]*)?)|([\+-]?\([\+-]?([0#]{1,3},)?[0#]*(\.[0#]*)?\)))$/.test(e))return this.throwError(1,
"An invalid mask was specified for the \nMask constructor.",a);!0==c&&b.length==this.strippedValue.length&&(b=b.substring(0,b.length-1));if(this.allowPartial&&0==b.replace(/[^0-9]/,"").length)return b;this.strippedValue=b;0==b.length&&(b=NaN);var g=Number(b);if(isNaN(g))return this.throwError(2,"The value entered was not a number.",a);if(0==e.length)return b;var f=String(Math.abs(-1<b.indexOf(".")?b.split(".")[0]:b)),h=-1<b.indexOf(".")?b.split(".")[1]:"",m=h,k=0!=g&&-1*Math.abs(g)==g,g={$:/^[\$]/.test(e),
"(":k&&-1<e.indexOf("("),"+":-1!=e.indexOf("+")&&!k};g["-"]=k&&(!g["("]||-1!=e.indexOf("-"));e=e.replace(/[^#0.,]*/gi,"");k=-1<e.indexOf(".")?e.split(".")[1]:"";if(0==k.length)f=String(Math.round(Number(f))),h="";else{var l=k.lastIndexOf("0")+1;if(h.length>k.length)h=String(Math.round(Number(h.substring(0,k.length+1))/10));else for(;h.length<l;)h+="0"}var l=-1<e.indexOf(".")?e.split(".")[0]:e,l=l.replace(/[^0#]+/gi,""),p=l.indexOf("0")+1;if(0<p)for(p=l.length-p+1;f.length<p;)f="0"+f;if(/[#0]+,[#0]{3}/.test(e)){e=
[];l=0;for(f=Number(f);999<f;)e[l]="00"+String(f%1E3),e[l]=e[l].substring(e[l].length-3),f=Math.floor(f/1E3),l++;e[l]=String(f%1E3);f=e.reverse().join(",")}b=0<h.length&&!this.allowPartial||0<k.length&&this.allowPartial&&-1<b.indexOf(".")&&m.length>=h.length?f+"."+h:0<k.length&&this.allowPartial&&-1<b.indexOf(".")&&m.length<h.length?f+"."+m:f;g.$&&(b=this.mask.replace(/(^[\$])(.+)/gi,"$")+b);g["+"]&&(b="+"+b);g["-"]&&(b="-"+b);g["("]&&(b="("+b+")");return b};
Mask.prototype.setDate=function(a){var c=this.mask,b,e,g,f,h,m;b=c.split(/[^mdy]+/);m=c.split(/[mdy]+/);e=a.split(/[^0-9]/);0==m[0].length&&m.splice(0,1);for(var k=0;k<b.length;k++)c=b[k].charAt(0).toLowerCase(),"m"==c?g=parseInt(e[k],10)-1:"d"==c?f=parseInt(e[k],10):"y"==c&&(h=parseInt(e[k],10));3>String(h).length&&(h=2E3+h,(new Date).getFullYear()+5<h&&(h-=100));h=new Date(h,g,f);if(h.getDate()!=f)return this.throwError(1,"An invalid day was entered.",a);if(h.getMonth()!=g)return this.throwError(2,
"An invalid month was entered.",a);a="";for(k=0;k<b.length;k++)c=b[k].charAt(0).toLowerCase(),"m"==c?(g++,2==b[k].length&&(g="0"+g,g=g.substring(g.length-2)),a+=g):"d"==c?(2==b[k].length&&(f="0"+f,f=f.substring(f.length-2)),a+=f):"y"==c&&(a=2==b[k].length?a+h.getYear():a+h.getFullYear()),k<b.length-1&&(a+=m[k]);return a};
Mask.prototype.setDateKeyPress=function(a,c){var b=a,e=this.mask,g=b.charAt(b.length-1),f,h,m,k,l="",p="",n="",r,j,t;if(!0==c){for(;/[^0-9]/gi.test(b.charAt(b.length-1));)b=b.substring(0,b.length-1);/[^0-9]/gi.test(this.strippedValue.charAt(this.strippedValue.length-1))&&(b=b.substring(0,b.length-1));if(0==b.length)return""}f=e.split(/[^mdy]/);s=e.split(/[mdy]+/);for(j=0;j<s.length;j++)0==s[j].length&&(s.splice(j,1),j-=1);b=b.split(/[^0-9]/);for(j=0;j<b.length;j++)0==b[j].length&&(b.splice(j,1),j-=
1);j=0<b.length?b.length-1:0;h=f[j].charAt(0);m=f[j].length;for(j=0;j<b.length;j++)r=f[j].charAt(0).toLowerCase(),"m"==r?l=parseInt(b[j],10)-1:"d"==r?p=parseInt(b[j],10):"y"==r&&(n=parseInt(b[j],10));var q="";for(j=0;j<b.length;j++){r=f[j].charAt(0).toLowerCase();if("m"==r){t=/[^0-9]/.test(g)&&"m"==h;l++;if(2==b[j].length&&10>l||2==f[j].length&&"m"!=h||1<l&&"m"==h||t&&2==f[j].length)l="0"+l,l=l.substring(l.length-2);k=String(l).length;m=2;q+=l}else if("d"==r){t=/[^0-9]/.test(g)&&"d"==h;if(2==b[j].length&&
10>p||2==f[j].length&&"d"!=h||3<p&&"d"==h||t&&2==f[j].length)p="0"+p,p=p.substring(p.length-2);k=String(p).length;m=2;q+=p}else if("y"==r){t=/[^0-9]/.test(g)&&"y"==h;n="y"==h?String(n):2==f[j].length?d.getYear():d.getFullYear();if(2==b[j].length&&10>n||2==f[j].length&&"y"!=h||t&&2==f[j].length)n="0"+n,n=n.substring(n.length-2);m=f[j].length;k=String(n).length;q+=n}if((m==k||t)&&r==h&&j<s.length||j<s.length&&r!=h)q+=s[j]}q.length>e.length&&(q=q.substring(0,e.length));return this.strippedValue="NaN"==
q?"":q};Mask.prototype.updateFormattedValue=function(a){a=this.format(a);return this.target.value=a};
function qEvent(a){if(navigator.userAgent.match(/MSIE/g))a=window.event,this.keyCode=parseInt(a.keyCode,10),this.button=a.button,this.srcElement=a.srcElement,this.type=a.type,document.all?(this.x=a.clientX+document.body.scrollLeft,this.y=a.clientY+document.body.scrollTop):(this.x=a.clientX,this.y=a.clientY),this.screenX=a.screenX,this.screenY=a.screenY,this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey;else{var c="key"==a.type.substring(0,3);this.keyCode=c?parseInt(a.which,10):0;
this.button=!c?parseInt(a.which,10):0;this.srcElement=a.target;this.type=a.type;this.x=a.pageX;this.y=a.pageY;this.screenX=a.screenX;this.screenY=a.screenY;document.layers?(this.altKey=0<(a.modifiers&Event.ALT_MASK),this.ctrlKey=0<(a.modifiers&Event.CONTROL_MASK),this.shiftKey=0<(a.modifiers&Event.SHIFT_MASK),this.keyCode=this.translateKeyCode(this.keyCode)):(this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey)}0==this.button&&(this.setKeyPressed(this.keyCode),this.keyChar=String.fromCharCode(this.keyCode))}
qEvent.prototype.translateKeyCode=function(a){var c={};if(document.layers){if(96<this.keyCode&&123>this.keyCode)return this.keyCode-32;c={96:192,126:192,33:49,64:50,35:51,36:52,37:53,94:54,38:55,42:56,40:57,41:48,92:220,124:220,125:221,93:221,91:219,123:219,39:222,34:222,47:191,63:191,46:190,62:190,44:188,60:188,45:189,95:189,43:187,61:187,59:186,58:186,"null":null}}return c[a]?c[a]:a};
qEvent.prototype.setKP=function(a,c){this.keyPressedCode=a;this.keyPressed=(this.keyNonChar="string"==typeof c)?c:String.fromCharCode(a);this.isNumeric=parseInt(this.keyPressed,10)==this.keyPressed;this.isAlpha=64<this.keyCode&&91>this.keyCode&&!this.altKey&&!this.ctrlKey;return!0};
qEvent.prototype.setKeyPressed=function(a){var c=this.shiftKey;if(!c&&64<a&&91>a)return this.setKP(a+32);if(95<a&&106>a)return this.setKP(a-48);switch(a){case 49:case 51:case 52:case 53:c&&(a-=16);break;case 50:c&&(a=64);break;case 54:c&&(a=94);break;case 55:c&&(a=38);break;case 56:c&&(a=42);break;case 57:c&&(a=40);break;case 48:c&&(a=41);break;case 192:a=c?126:96;break;case 189:a=c?95:45;break;case 187:a=c?43:61;break;case 220:a=c?124:92;break;case 221:a=c?125:93;break;case 219:a=c?123:91;break;
case 222:a=c?34:39;break;case 186:a=c?58:59;break;case 191:a=c?63:47;break;case 190:a=c?62:46;break;case 188:a=c?60:44;break;case 106:case 57379:a=42;break;case 107:case 57380:a=43;break;case 109:case 57381:a=45;break;case 110:a=46;break;case 111:case 57378:a=47;break;case 8:return this.setKP(a,"[backspace]");case 9:return this.setKP(a,"[tab]");case 13:return this.setKP(a,"[enter]");case 16:case 57389:return this.setKP(a,"[shift]");case 17:case 57390:return this.setKP(a,"[ctrl]");case 18:case 57388:return this.setKP(a,
"[alt]");case 19:case 57402:return this.setKP(a,"[break]");case 20:return this.setKP(a,"[capslock]");case 32:return this.setKP(a,"[space]");case 91:return this.setKP(a,"[windows]");case 93:return this.setKP(a,"[properties]");case 33:case 57371:return this.setKP(-1*a,"[pgup]");case 34:case 57372:return this.setKP(-1*a,"[pgdown]");case 35:case 57370:return this.setKP(-1*a,"[end]");case 36:case 57369:return this.setKP(-1*a,"[home]");case 37:case 57375:return this.setKP(-1*a,"[left]");case 38:case 57373:return this.setKP(-1*
a,"[up]");case 39:case 57376:return this.setKP(-1*a,"[right]");case 40:case 57374:return this.setKP(-1*a,"[down]");case 45:case 57382:return this.setKP(-1*a,"[insert]");case 46:case 57383:return this.setKP(-1*a,"[delete]");case 144:case 57400:return this.setKP(-1*a,"[numlock]")}return 111<a&&124>a?this.setKP(-1*a,"[f"+(a-111)+"]"):this.setKP(a)};
function $addEvent(a,c,b,e){c=c.toLowerCase();e="boolean"==typeof e?e:!0;var g=a[c]?a[c].toString():"",g=g.substring(g.indexOf("{")+1,g.lastIndexOf("}")),g=(e?g+b:b+g)+"\n";return a[c]=window.Event?new Function("event",g):new Function(g)};