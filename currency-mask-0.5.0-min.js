function _MaskAPI(){this.version="0.5";this.instances=0;this.objects={}}MaskAPI=new _MaskAPI;function Mask(a,c){this.mask=a;this.type=typeof c=="string"?c:"string";this.error=[];this.errorCodes=[];this.strippedValue=this.value="";this.allowPartial=!1;this.id=MaskAPI.instances++;this.ref="MaskAPI.objects['"+this.id+"']";MaskAPI.objects[this.id]=this}
Mask.prototype.attach=function(a){this.msie=navigator.userAgent.match(/MSIE/g);this.msie9=navigator.userAgent.match(/MSIE 9/g);$addEvent(a,"onkeydown","return "+this.ref+".isAllowKeyPress(event, this);",!0);$addEvent(a,"onkeyup","return "+this.ref+".getKeyPress(event, this);",!0);this.target=a;this.msie9?$(a).blur(function(){$(this).change();return!0}):$addEvent(a,"onblur","this.value = "+this.ref+".format(this.value);"+this.ref+".target.value=this.value;return this.value;",!0)};
Mask.prototype.isAllowKeyPress=function(a,c){if(this.type!="string")return!0;var b=new qEvent(a);return b.keyCode>47&&c.value.length>=this.mask.length&&!b.ctrlKey?!1:!0};
Mask.prototype.getKeyPress=function(a,c,b){this.allowPartial=!0;var e=new qEvent(a),a=this.getCaretPosition(c),g=c.value.length;if(e.keyCode>47||b==!0||e.keyCode==8||e.keyCode==46)b=c.value,e=e.keyCode==8||e.keyCode==46?!0:!1,this.value=this.type=="number"?this.setNumber(b,e):this.type=="date"?this.setDateKeyPress(b,e):this.setGeneric(b,e),c.value=this.value,this.setCaretPosition(c,c.value.length>g?a+1:a);this.allowPartial=!1;return!0};
Mask.prototype.getCaretPosition=function(a){var c=0;if(this.msie){var b=document.selection.createRange(),c=document.selection.createRange().text.length;b.moveStart("character",-a.value.length);c=b.text.length-c;caretEnd=c+b.text.length}else if(a.selectionStart||a.selectionStart=="0")c=a.selectionStart;return c};
Mask.prototype.setCaretPosition=function(a,c){if(this.msie){var b=document.selection.createRange();b.moveStart("character",-a.value.length);b.collapse(!0);b.moveEnd("character",c);b.moveStart("character",c);b.select()}else if(a.selectionStart||a.selectionStart=="0")a.selectionStart=c,a.selectionEnd=c};Mask.prototype.format=function(a){return this.value=this.type=="number"?this.setNumber(a):this.type=="date"?this.setDate(a):this.setGeneric(a)};
Mask.prototype.throwError=function(a,c,b){this.error[this.error.length]=c;this.errorCodes[this.errorCodes.length]=a;return typeof b=="string"?b:!0};
Mask.prototype.setGeneric=function(a,c){var b,e=this.mask,g=[],f="",h,l,j=[],k=0,n={x:"A-Za-z","#":"0-9","*":"A-Za-z0-9"};b=a.replace(RegExp("[^"+n["*"]+"]","gi"),"");c==!0&&b.length==this.strippedValue.length&&(b=b.substring(0,b.length-1));this.strippedValue=b;for(var m=0;m<e.length;m++){l=e.charAt(m);h="x#*".indexOf(l)>-1;l=="!"&&(l=e.charAt(m++));if(h&&!this.allowPartial||h&&this.allowPartial&&g.length<b.length)g[g.length]="["+n[l]+"]";j[j.length]={chr:l,mask:h}}e=!1;if(!this.allowPartial&&!RegExp(g.join("")).test(b))return this.throwError(1,
'The value "'+a+'" must be in the format '+this.mask+".",a);else if(this.allowPartial&&b.length>0||!this.allowPartial)for(m=0;m<j.length;m++){if(j[m].mask){for(;b.length>0&&!RegExp(g[k]).test(b.charAt(k));)b=b.length==1?"":b.substring(1);b.length>0&&(f+=b.charAt(k),e=!0);k++}else f+=j[m].chr;if(this.allowPartial&&k>b.length)break}this.allowPartial&&!e&&(f="");if(this.allowPartial)this.nextValidChar=f.length<j.length?n[j[f.length].chr]:null;return f};
Mask.prototype.setNumber=function(a,c){var b=String(a).replace(/[^\d.-]*/gi,""),e=this.mask;if((b=="+"||b=="-")&&e.indexOf(b)==-1)return"";if(this.value.length>0&&(b.indexOf("+")!=-1||b.indexOf("-")!=-1))b=b.replace(/\+/g,""),b=b.replace(/\-/g,"");b=b.replace(/\+/,"d").replace(/\+/g,"").replace(/d/,"+");b=b.replace(/\-/,"d").replace(/\-/g,"").replace(/d/,"-");b=b.replace(/\./,"d").replace(/\./g,"").replace(/d/,".");if(!/^[\$]?((\$?[\+-]?([0#]{1,3},)?[0#]*(\.[0#]*)?)|([\+-]?\([\+-]?([0#]{1,3},)?[0#]*(\.[0#]*)?\)))$/.test(e))return this.throwError(1,
"An invalid mask was specified for the \nMask constructor.",a);c==!0&&b.length==this.strippedValue.length&&(b=b.substring(0,b.length-1));if(this.allowPartial&&b.replace(/[^0-9]/,"").length==0)return b;this.strippedValue=b;b.length==0&&(b=NaN);var g=Number(b);if(isNaN(g))return this.throwError(2,"The value entered was not a number.",a);if(e.length==0)return b;var f=String(Math.abs(b.indexOf(".")>-1?b.split(".")[0]:b)),h=b.indexOf(".")>-1?b.split(".")[1]:"",l=h,j=g!=0&&Math.abs(g)*-1==g,g={$:/^[\$]/.test(e),
"(":j&&e.indexOf("(")>-1,"+":e.indexOf("+")!=-1&&!j};g["-"]=j&&(!g["("]||e.indexOf("-")!=-1);e=e.replace(/[^#0.,]*/gi,"");j=e.indexOf(".")>-1?e.split(".")[1]:"";if(j.length==0)f=String(Math.round(Number(f))),h="";else{var k=j.lastIndexOf("0")+1;if(h.length>j.length)h=String(Math.round(Number(h.substring(0,j.length+1))/10));else for(;h.length<k;)h+="0"}var k=e.indexOf(".")>-1?e.split(".")[0]:e,k=k.replace(/[^0#]+/gi,""),n=k.indexOf("0")+1;if(n>0)for(n=k.length-n+1;f.length<n;)f="0"+f;if(/[#0]+,[#0]{3}/.test(e)){e=
[];k=0;for(f=Number(f);f>999;)e[k]="00"+String(f%1E3),e[k]=e[k].substring(e[k].length-3),f=Math.floor(f/1E3),k++;e[k]=String(f%1E3);f=e.reverse().join(",")}b=h.length>0&&!this.allowPartial||j.length>0&&this.allowPartial&&b.indexOf(".")>-1&&l.length>=h.length?f+"."+h:j.length>0&&this.allowPartial&&b.indexOf(".")>-1&&l.length<h.length?f+"."+l:f;g.$&&(b=this.mask.replace(/(^[\$])(.+)/gi,"$")+b);g["+"]&&(b="+"+b);g["-"]&&(b="-"+b);g["("]&&(b="("+b+")");return b};
Mask.prototype.setDate=function(a){var c=this.mask,b,e,g,f,h,l;b=c.split(/[^mdy]+/);l=c.split(/[mdy]+/);e=a.split(/[^0-9]/);l[0].length==0&&l.splice(0,1);for(var j=0;j<b.length;j++)c=b[j].charAt(0).toLowerCase(),c=="m"?g=parseInt(e[j],10)-1:c=="d"?f=parseInt(e[j],10):c=="y"&&(h=parseInt(e[j],10));String(h).length<3&&(h=2E3+h,(new Date).getFullYear()+5<h&&(h-=100));h=new Date(h,g,f);if(h.getDate()!=f)return this.throwError(1,"An invalid day was entered.",a);else if(h.getMonth()!=g)return this.throwError(2,
"An invalid month was entered.",a);a="";for(j=0;j<b.length;j++)c=b[j].charAt(0).toLowerCase(),c=="m"?(g++,b[j].length==2&&(g="0"+g,g=g.substring(g.length-2)),a+=g):c=="d"?(b[j].length==2&&(f="0"+f,f=f.substring(f.length-2)),a+=f):c=="y"&&(a+=b[j].length==2?h.getYear():h.getFullYear()),j<b.length-1&&(a+=l[j]);return a};
Mask.prototype.setDateKeyPress=function(a,c){var b=a,e=this.mask,g=b.charAt(b.length-1),f,h,l,j,k="",n="",m="",o,i,q;if(c==!0){for(;/[^0-9]/gi.test(b.charAt(b.length-1));)b=b.substring(0,b.length-1);/[^0-9]/gi.test(this.strippedValue.charAt(this.strippedValue.length-1))&&(b=b.substring(0,b.length-1));if(b.length==0)return""}f=e.split(/[^mdy]/);s=e.split(/[mdy]+/);for(i=0;i<s.length;i++)s[i].length==0&&(s.splice(i,1),i-=1);b=b.split(/[^0-9]/);for(i=0;i<b.length;i++)b[i].length==0&&(b.splice(i,1),i-=
1);i=b.length>0?b.length-1:0;h=f[i].charAt(0);l=f[i].length;for(i=0;i<b.length;i++)o=f[i].charAt(0).toLowerCase(),o=="m"?k=parseInt(b[i],10)-1:o=="d"?n=parseInt(b[i],10):o=="y"&&(m=parseInt(b[i],10));var p="";for(i=0;i<b.length;i++){o=f[i].charAt(0).toLowerCase();if(o=="m"){q=/[^0-9]/.test(g)&&h=="m";k++;if(b[i].length==2&&k<10||f[i].length==2&&h!="m"||k>1&&h=="m"||q&&f[i].length==2)k="0"+k,k=k.substring(k.length-2);j=String(k).length;l=2;p+=k}else if(o=="d"){q=/[^0-9]/.test(g)&&h=="d";if(b[i].length==
2&&n<10||f[i].length==2&&h!="d"||n>3&&h=="d"||q&&f[i].length==2)n="0"+n,n=n.substring(n.length-2);j=String(n).length;l=2;p+=n}else if(o=="y"){q=/[^0-9]/.test(g)&&h=="y";m=h=="y"?String(m):f[i].length==2?d.getYear():d.getFullYear();if(b[i].length==2&&m<10||f[i].length==2&&h!="y"||q&&f[i].length==2)m="0"+m,m=m.substring(m.length-2);l=f[i].length;j=String(m).length;p+=m}if((l==j||q)&&o==h&&i<s.length||i<s.length&&o!=h)p+=s[i]}p.length>e.length&&(p=p.substring(0,e.length));return this.strippedValue=p==
"NaN"?"":p};Mask.prototype.updateFormattedValue=function(a){a=this.format(a);return this.target.value=a};
function qEvent(a){if(navigator.userAgent.match(/MSIE/g))a=window.event,this.keyCode=parseInt(a.keyCode,10),this.button=a.button,this.srcElement=a.srcElement,this.type=a.type,document.all?(this.x=a.clientX+document.body.scrollLeft,this.y=a.clientY+document.body.scrollTop):(this.x=a.clientX,this.y=a.clientY),this.screenX=a.screenX,this.screenY=a.screenY,this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey;else{var c=a.type.substring(0,3)=="key";this.keyCode=c?parseInt(a.which,10):0;
this.button=!c?parseInt(a.which,10):0;this.srcElement=a.target;this.type=a.type;this.x=a.pageX;this.y=a.pageY;this.screenX=a.screenX;this.screenY=a.screenY;document.layers?(this.altKey=(a.modifiers&Event.ALT_MASK)>0,this.ctrlKey=(a.modifiers&Event.CONTROL_MASK)>0,this.shiftKey=(a.modifiers&Event.SHIFT_MASK)>0,this.keyCode=this.translateKeyCode(this.keyCode)):(this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey)}if(this.button==0)this.setKeyPressed(this.keyCode),this.keyChar=String.fromCharCode(this.keyCode)}
qEvent.prototype.translateKeyCode=function(a){var c={};if(document.layers){if(this.keyCode>96&&this.keyCode<123)return this.keyCode-32;c={96:192,126:192,33:49,64:50,35:51,36:52,37:53,94:54,38:55,42:56,40:57,41:48,92:220,124:220,125:221,93:221,91:219,123:219,39:222,34:222,47:191,63:191,46:190,62:190,44:188,60:188,45:189,95:189,43:187,61:187,59:186,58:186,"null":null}}return c[a]?c[a]:a};
qEvent.prototype.setKP=function(a,c){this.keyPressedCode=a;this.keyPressed=(this.keyNonChar=typeof c=="string")?c:String.fromCharCode(a);this.isNumeric=parseInt(this.keyPressed,10)==this.keyPressed;this.isAlpha=this.keyCode>64&&this.keyCode<91&&!this.altKey&&!this.ctrlKey;return!0};
qEvent.prototype.setKeyPressed=function(a){var c=this.shiftKey;if(!c&&a>64&&a<91)return this.setKP(a+32);if(a>95&&a<106)return this.setKP(a-48);switch(a){case 49:case 51:case 52:case 53:c&&(a-=16);break;case 50:c&&(a=64);break;case 54:c&&(a=94);break;case 55:c&&(a=38);break;case 56:c&&(a=42);break;case 57:c&&(a=40);break;case 48:c&&(a=41);break;case 192:a=c?126:96;break;case 189:a=c?95:45;break;case 187:a=c?43:61;break;case 220:a=c?124:92;break;case 221:a=c?125:93;break;case 219:a=c?123:91;break;
case 222:a=c?34:39;break;case 186:a=c?58:59;break;case 191:a=c?63:47;break;case 190:a=c?62:46;break;case 188:a=c?60:44;break;case 106:case 57379:a=42;break;case 107:case 57380:a=43;break;case 109:case 57381:a=45;break;case 110:a=46;break;case 111:case 57378:a=47;break;case 8:return this.setKP(a,"[backspace]");case 9:return this.setKP(a,"[tab]");case 13:return this.setKP(a,"[enter]");case 16:case 57389:return this.setKP(a,"[shift]");case 17:case 57390:return this.setKP(a,"[ctrl]");case 18:case 57388:return this.setKP(a,
"[alt]");case 19:case 57402:return this.setKP(a,"[break]");case 20:return this.setKP(a,"[capslock]");case 32:return this.setKP(a,"[space]");case 91:return this.setKP(a,"[windows]");case 93:return this.setKP(a,"[properties]");case 33:case 57371:return this.setKP(a*-1,"[pgup]");case 34:case 57372:return this.setKP(a*-1,"[pgdown]");case 35:case 57370:return this.setKP(a*-1,"[end]");case 36:case 57369:return this.setKP(a*-1,"[home]");case 37:case 57375:return this.setKP(a*-1,"[left]");case 38:case 57373:return this.setKP(a*
-1,"[up]");case 39:case 57376:return this.setKP(a*-1,"[right]");case 40:case 57374:return this.setKP(a*-1,"[down]");case 45:case 57382:return this.setKP(a*-1,"[insert]");case 46:case 57383:return this.setKP(a*-1,"[delete]");case 144:case 57400:return this.setKP(a*-1,"[numlock]")}return a>111&&a<124?this.setKP(a*-1,"[f"+(a-111)+"]"):this.setKP(a)};
function $addEvent(a,c,b,e){var c=c.toLowerCase(),e=typeof e=="boolean"?e:!0,g=a[c]?a[c].toString():"",g=g.substring(g.indexOf("{")+1,g.lastIndexOf("}")),g=(e?g+b:b+g)+"\n";return a[c]=window.Event?new Function("event",g):new Function(g)};